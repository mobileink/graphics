%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  e focus
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[ht]
  \center
  \caption{sweep e}
  \hspace*{-3cm}
\begin{tikzpicture}[scale=5,domain=-.3:1.3]

 \draw[very thin,color=gray] (-1,0) grid (3.2,1.2);
%  \draw[->] (-1.2,0) -- (3.2,0) node[right] {$x$};
%  \draw[->] (0,-1.2) -- (0,2.2) node[above] {$f(x)$};

  %% some ref lines
  \draw[gray] (1/\sqrttwo,0) node[color=black, below] {$\frac{1}{\sqrt{2}}$}
  -- (1/\sqrttwo,1/\sqrttwo);
  \draw[gray] (0,1/\sqrttwo) -- (1/\sqrttwo,1/\sqrttwo);

  %%%%%%%%%%%%%%%%
  % shade hyperbolic and circle sectors
  \begin{scope}[domain=1:\e, even odd rule]
    \clip (0,0) -- (e,1/e) -- (1,1) -- cycle;
    \fill[color=blue,opacity=.15] (0,0) circle(1);

    \clip (0,0) circle(1) (0,0)--(1,1) -- plot (\x,{(1/\x)}) -- (\e,\inve) -- cycle;
    \fill[opacity=.15] (0,0)--(1,1) -- plot (\x,{(1/\x)}) -- (\e,\inve) -- cycle;
 \end{scope}

 %% axis:  f(x) = x
  \draw[color=gray] (0,0) -- (1.2,1.2) node[right] {$f(x) =x$};
  \draw[black] (0,0) -- (1,1);

  %% e diameter
  \draw[black] (0,0) -- (e,1/e);

%%%%%%%%%%%%%%%%
%% circle stuff
%%  unit circle
  \begin{scope}
    \clip (0,0) rectangle (1.1,1.1);
    \draw (0,0) circle (1);
   \end{scope}

 % 2.  circular rectilinear rotation
 %% dot endpts of arc
%\draw[-latex,red] (1/\sqrttwo,1/\sqrttwo) -- (1/\sqrttwo,\esqinv);
% \draw[-latex,red] (1/\sqrttwo,\esqinv) -- (1,\esqinv);

 % 3.  circular arc travel
 \begin{scope}
 \clip (0,0) -- (1,1) -- (e,1/e) -- cycle;
% \draw[thick,red] circle (1);
\end{scope}

\draw[gray] (1/\sqrttwo,1/\sqrttwo) -- (1,\esqinv); % NB: wrong x for
                                % pt 2

% 4. dots
% \fill[red] (1/\sqrttwo,1/\sqrttwo) node[above] {$A$} circle (.5pt);
% \fill[red] (1/\sqrttwo,\esqinv) node[left] {$B$} circle (.5pt);
% \fill[red] (1,\esqinv)  node[right] {$C$} circle (.5pt);


 %%%%%%%%%%%%%%%%
 % 1.  hyperbolic rectilinear rotation
  \draw[-latex,red] (1,1) -- (e,1);
  \draw[-latex,red] (e,1) -- (e,1/e);

%% f(x) = 1/x
  \draw[domain=.7:3.2,color=green!50!black] plot (\x,{(1/\x)});
  \draw[color=green!50!black] (.8,1.2) node[left] {$f(x) = \frac{1}{x}$};
  % \draw[] (1,.3) node[anchor=west] {$\scriptsize 1=\ln e$};
 %% 1/x travel

 %% chord
  \draw[black] (1,1) -- (e,1/e);

  %% arc
 \draw[-latex,thick,red,domain=1:e] plot (\x,{(1/\x)});

 %%%%%%%%%%%%%%%%

 %% moving vector
 \draw[-latex,black,postaction={decorate,
                    decoration={markings,
                      mark=at position 0.74 with {\arrow{latex}},
                      mark=at position 0.82 with {\arrow{latex}};}
                   }] (0,0) -- (1.8, 1);
\draw [->] (1.8,.975) -- (1.85,.975);

%%%%%%%%%%%%%%%%

 %% ref segments
  \draw[gray] (e,0) -- (e,1/e);

  \draw[gray] (0,\inve) -- (\e,\inve);
% \fill[black] (0, \inve) circle (.7pt) node[left]  {$\frac{1}{e}$}
%  node[right] {$F$};



  %% (e,y) axis
%  \draw[red, dashed] (\e,-1.1) -- (\e, 3.9);
  %% (x,e) axis
%  \draw[red, dashed] (0,\e) -- (3.9,\e);

  %% (x,1) axis and label
%  \draw[red, dashed] (-0.1,1) -- (3.9,1);
%  \fill[black] (0,1) node[left] {$1$};

  %% secant
%  \draw[dashed] (0,0) -- (\e, 1);


 %  \draw[gray] (1/\sqrttwo,0) node[below] {$\frac{1}{\sqrt{2}}$}
 %  -- (1/\sqrttwo,1/\sqrttwo);
 %  \draw[gray] (0,1/\sqrttwo) -- (1/\sqrttwo,1/\sqrttwo);

 %  \draw[gray] (\sqrttwo,0) node[below left] {$\scriptsize\sqrt{2}$}
 %  -- (\sqrttwo,\sqrttwo);
 %  \draw[gray] (0,\sqrttwo) -- (\sqrttwo,\sqrttwo);

 %  %%%%
 %  \draw[gray] (0,e/\sqrttwo) -- (e/\sqrttwo,e/\sqrttwo);
 % \draw[gray] (e/\sqrttwo,0) node[below] {$\frac{e}{\small\sqrt{2}}$}
 %  -- (e/\sqrttwo,e/\sqrttwo);

 %  %%%%
 %  \draw[gray] (0,3/2) node[left] {$\frac{3}{2}$} -- (3/2,3/2);
 %  \draw[gray] ({2-\sqrttwo+1},0) node[below=10pt] {$2-\frac{1}{e}$} -- ({2-\sqrttwo+1},{2-\sqrttwo+1});

  %% dot origin
  \fill[black] (0,0) node[below left] {$O$} circle (.7pt);

  %% dot (0,1/e)
 \fill[black] (0,\inve) circle (.7pt);

  %% dot (0,1)
  \fill[black] (0,1) node[left] {$1$} node[above right] {} circle (.7pt);
  %% dot (1,0)
  \fill[black] (1,0) node[below] {$1$} circle (.7pt);

  %% dot (1,1)
%  \fill[red] (1,1) node[above right] { $A'$}  circle (.5pt);

 %% label (1,e)
%  \fill[black] (1,\e) node[anchor=south west] {$(1,e)$} circle (.7pt);

 %% dot (e,0)
  \fill[black] (\e,0) node[below right]{$E$} node[below] {$e$} circle (.7pt);

  %% dot (e,1)
  \fill[red] (\e,1) node[above right,color=red]  {$B'$} circle (.5pt); 

  %% dot (e,1/e)
  \fill[red] (\e, \inve) node[right] {$C'$} circle (.5pt);

  % \draw[green] (1,0) +(80:1cm) arc [radius=1cm,start angle=0];
  \draw (0,0) circle (1);
 \draw[thick,red] (1,0) arc [start angle=0,radius=1,end angle=deg(1)]
 node[black,above right] {$1$} -- (0,0);
 \draw[thick,red] (1,0) arc [start angle=0,radius=1,end angle=deg(2)]
 node[black,above left] {$2$} -- (0,0);

 \draw[thick,black] (1,0) arc [start angle=0,radius=1,end angle=deg(e)]
 node[black,left] {$e$} -- (0,0);
\draw[thick,black] (1,0) arc [start angle=0,radius=1,end angle=deg(e-2)]
 node[black,above right] {$e-2$} -- (0,0);
\draw[thick,black] (1,0) arc [start angle=0,radius=1,end angle=deg(pi/2-(e-2))]
 node[black,above right] {$\frac{\pi}{2}-e-2$} -- (0,0);
 \draw[thick,black] (1,0) arc [start angle=0,radius=1,end angle=deg(e-1)]
 node[black,above] {$e-1$} -- (0,0);
 \draw[thick,black] (1,0) arc [start angle=0,radius=1,end angle=deg(1-e)]
 node[black,below] {$1-e$} -- (0,0);

 \draw[thick,black] (1,0) arc [start angle=0,radius=1,end angle=deg(1/e)]
 node[black,right] {$1/e$} -- (0,0);
 \draw[thick,black] (1,0) arc [start angle=0,radius=1,end angle=deg(1-1/e)]
 node[black,right] {$1-1/e$} -- (0,0);

\end{tikzpicture}
\end{figure}

